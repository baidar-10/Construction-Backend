# üëë –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å StroyHub

## üìã –û–±–∑–æ—Ä

–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π, –≤–∫–ª—é—á–∞—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏ –∏ –º–æ–¥–µ—Ä–∞—Ü–∏—é –∫–æ–Ω—Ç–µ–Ω—Ç–∞.

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. **Dashboard (–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è)**
- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –≤–æ—Ä–∫–µ—Ä–æ–≤, –∑–∞–∫–∞–∑—á–∏–∫–æ–≤
- –ê–∫—Ç–∏–≤–Ω—ã–µ –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∑—ã–≤–æ–≤

### 2. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏**
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É (–∑–∞–∫–∞–∑—á–∏–∫–∏/–≤–æ—Ä–∫–µ—Ä—ã)
- –ü–æ–∏—Å–∫ –ø–æ email, –∏–º–µ–Ω–∏ –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω—É
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞/—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –£–¥–∞–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–æ–≤

### 3. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏**
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É
- –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–∞–∂–¥–æ–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏
- –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### 4. **–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –≤–æ—Ä–∫–µ—Ä–æ–≤**
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–º –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏

## üîê –î–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

### –£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:
```
Email: admin@stroyhub.com
Password: admin123
```

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞ –≤ —Ä–∞–∑–¥–µ–ª–µ Settings!

### URLs:
- **–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞:** http://localhost:5173/admin
- **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** http://localhost:8080/swagger/index.html

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–í—Å–µ –∞–¥–º–∏–Ω—Å–∫–∏–µ endpoints —Ç—Ä–µ–±—É—é—Ç:
1. JWT —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `Authorization: Bearer <token>`
2. User type –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `admin`

–ü—Ä–∏–º–µ—Ä –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞:
```bash
curl -X POST http://localhost:8080/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "admin@stroyhub.com",
    "password": "admin123"
  }'
```

### API Endpoints

#### **GET /api/admin/dashboard**
–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

```bash
curl http://localhost:8080/api/admin/dashboard \
  -H "Authorization: Bearer YOUR_TOKEN"
```

–û—Ç–≤–µ—Ç:
```json
{
  "stats": {
    "totalUsers": 150,
    "totalWorkers": 50,
    "totalCustomers": 100,
    "totalBookings": 300,
    "activeBookings": 45,
    "totalReviews": 120
  }
}
```

#### **GET /api/admin/users**
–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `page` (int) - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 1)
- `limit` (int) - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 20)
- `userType` (string) - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É: "customer" –∏–ª–∏ "worker"

```bash
curl "http://localhost:8080/api/admin/users?page=1&limit=20&userType=worker" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

#### **PUT /api/admin/users/:id/toggle-status**
–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞/—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```bash
curl -X PUT http://localhost:8080/api/admin/users/USER_ID/toggle-status \
  -H "Authorization: Bearer YOUR_TOKEN"
```

#### **DELETE /api/admin/users/:id**
–£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```bash
curl -X DELETE http://localhost:8080/api/admin/users/USER_ID \
  -H "Authorization: Bearer YOUR_TOKEN"
```

#### **GET /api/admin/bookings**
–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `page` (int)
- `limit` (int)
- `status` (string) - —Ñ–∏–ª—å—Ç—Ä: "pending", "accepted", "in_progress", "completed", "cancelled"

```bash
curl "http://localhost:8080/api/admin/bookings?status=pending" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

#### **PUT /api/admin/workers/:id/verify**
–í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –≤–æ—Ä–∫–µ—Ä–∞

```bash
curl -X PUT http://localhost:8080/api/admin/workers/WORKER_ID/verify \
  -H "Authorization: Bearer YOUR_TOKEN"
```

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### Backend
- **Middleware:** `AdminMiddleware()` - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ user_type = 'admin'
- **Service:** `AdminService` - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∞–¥–º–∏–Ω –æ–ø–µ—Ä–∞—Ü–∏–π
- **Handler:** `AdminHandler` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤

### Frontend
- **–°—Ç—Ä–∞–Ω–∏—Ü–∞:** `AdminDashboard.jsx` - –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–¥–º–∏–Ω–∫–∏
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
  - `AdminUsers.jsx` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
  - `AdminBookings.jsx` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏
- **API Service:** `adminService.js` - –∫–ª–∏–µ–Ω—Ç –¥–ª—è –∞–¥–º–∏–Ω API

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **–î–≤–æ–π–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:**
   - JWT middleware –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–∫–µ–Ω
   - Admin middleware –ø—Ä–æ–≤–µ—Ä—è–µ—Ç user_type

2. **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
   - –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
   - –ú–µ–Ω—è–π—Ç–µ –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∞ —Ä–µ–≥—É–ª—è—Ä–Ω–æ
   - –õ–æ–≥–∏—Ä—É–π—Ç–µ –≤—Å–µ –∞–¥–º–∏–Ω—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ 2FA –¥–ª—è –∞–¥–º–∏–Ω–æ–≤ (–±—É–¥—É—â–∞—è —Ñ–∏—á–∞)

## üìù –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∞–¥–º–∏–Ω–∞

### –ß–µ—Ä–µ–∑ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:

```bash
docker exec -i construction_db psql -U admin -d construction_db << 'EOF'
INSERT INTO users (id, email, password_hash, first_name, last_name, phone, user_type, is_active, created_at, updated_at)
VALUES (
    gen_random_uuid(),
    'neweadmin@stroyhub.com',
    '$2a$10$vI8aWBnW3fID.ZQ4/zo1G.q1lRps.9cGLcZEiGDMVr5yUP1KUOYTa',
    'New',
    'Admin',
    '+77001111111',
    'admin',
    true,
    NOW(),
    NOW()
);
EOF
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –•–µ—à –ø–∞—Ä–æ–ª—è –≤—ã—à–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø–∞—Ä–æ–ª—é "admin123"

## üîÑ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∞–¥–º–∏–Ω—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π (audit log)
- [ ] –î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (2FA)
- [ ] Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –≤–∞–∂–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏—è—Ö
- [ ] –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ CSV/Excel
- [ ] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –∏ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è–º–∏
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–º–∏—Å—Å–∏–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- [ ] –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- [ ] –ß–∞—Ç —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [ ] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º (CMS)

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –í–∞–∂–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:**
   - –ù–æ–≤—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥
   - –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
   - –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã

2. **–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:**
   - –ö–æ–Ω–≤–µ—Ä—Å–∏—è –∏–∑ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –≤ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
   - –°—Ä–µ–¥–Ω—è—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞–∫–∞–∑–∞
   - –û—Ç–º–µ–Ω—ã –∏ –ø—Ä–∏—á–∏–Ω—ã

3. **–í–æ—Ä–∫–µ—Ä—ã:**
   - –í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ vs –Ω–µ–≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
   - –°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç

## üêõ Troubleshooting

### –ù–µ –º–æ–≥—É –≤–æ–π—Ç–∏ –≤ –∞–¥–º–∏–Ω–∫—É
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: `docker exec construction_db psql -U admin -d construction_db -c "SELECT * FROM users WHERE email = 'admin@stroyhub.com';"`
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ user_type = 'admin'
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ is_active = true

### –û—à–∏–±–∫–∞ "Admin access required"
- JWT —Ç–æ–∫–µ–Ω –≤–∞–ª–∏–¥–µ–Ω, –Ω–æ user_type –Ω–µ 'admin'
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –±–∞–∑–µ: `SELECT user_type FROM users WHERE email = 'your@email.com';`

### –ù–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ backend –∑–∞–ø—É—â–µ–Ω: `docker ps | grep construction_backend`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker logs construction_backend`

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é: http://localhost:8080/swagger/index.html
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –±—ç–∫–µ–Ω–¥–∞: `docker logs -f construction_backend`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SWAGGER_GUIDE.md –∏ POSTMAN_GUIDE.md
